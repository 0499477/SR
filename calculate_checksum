int calculate_checksum(struct pkt packet) {
    int checksum = 0;
    checksum += packet.seqnum;
    checksum += packet.acknum;

    // Add the payload data to the checksum calculation
    for (int i = 0; i < 20; i++) {
        checksum += packet.payload[i];
    }

    // Invert the checksum to meet the required format
    checksum = ~checksum;

    return checksum;
}
